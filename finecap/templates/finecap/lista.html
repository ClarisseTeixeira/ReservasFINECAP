{% extends "base.html" %}

{% block title %}Lista de Usuários{% endblock %}

{% block forms %}
<form action="{% url 'listar' %}" method="get">
    <div class="input-group mb-2 ">
        <input type="text" class="form-control form-control-dark" name="filtro" placeholder="Pesquisar" aria-label="Pesquisar" value="{{ request.GET.filtro }}">
        <div class="input-group-prepend">
            <button class="btn btn-success" type="submit">Buscar</button>
            <a href="{% url 'listar' %}" class="btn btn-light">Limpar</a>
        </div>
    </div>
   
</form>
{% endblock %}



{% block center %}
<div class="mt-5">
    <h2>Lista de Usuários</h2>

    <table class="table">
        <thead class="thead-light">
            <tr>
                <th scope="col">Nome da empresa</th>
                <th scope="col">Categoria da empresa</th>
                <th scope="col">CNPJ</th>
                <th scope="col">Stand</th>
                <th scope="col">Valor</th>
                <th scope="col">Data de Reserva</th>
                <th scope="col">Quitato</th>
                <th scope="col">Mais</th>
            </tr>
        </thead>
       
        <tbody>
            {% for reserva in reserva %}
            <tr>
                <td>{{ reserva.nome_empresa }}</td>
                <td>{{ reserva.categoria_empresa }}</td>
                <td>{{ reserva.cnpj }}</td>
                <td>{{ reserva.stand }}</td>
                <td>{{ reserva.stand.valor }}</td>
                <td>{{  reserva.data_reserva|date:"d/m/Y" }}</td> 
                <td>{% if reserva.quitado == True %} Quitado {% else %} Pendente {% endif %}</td>                
                <td>
                    <a href="{% url 'editar' id=reserva.id %}"><i class="fas fa-edit"></i></a>
                    <a href="{% url 'remover' id=reserva.id %}"><i class="fas fa-trash-alt"></i></a>
                    <a href="{% url 'detalhes' id=reserva.id %}"><i class="fas fa-search"></i></a>
                </td>
            </tr>
                {% endfor %}
        </tbody>
    </table>


<div class="pagination">
    <span class="step-links">
        {% if reserva.has_previous %}
            <a href="?page=1">&laquo; primeira</a>
            <a href="?page={{ reserva.previous_page_number }}">anterior</a>
        {% endif %}

        <span class="current-page">{{ reserva.number }}</span>

        {% if reserva.has_next %}
            <a href="?page={{ reserva.next_page_number }}">próxima</a>
            <a href="?page={{ reserva.paginator.num_pages }}">última &raquo;</a>
        {% endif %}
    </span>
</div>

    <div class="mb-3">
        <a href="{% url 'criar' %}" class="btn btn-primary">Adicionar Novo</a>
    </div>
</div>
{% endblock %}